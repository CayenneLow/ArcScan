<!DOCTYPE html>
<!-- reference: https://datatables.net/extensions/buttons/examples/initialisation/export.html -->
<html>
	<head>
            <link rel="stylesheet" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css">
            <link rel="stylesheet" href="https://cdn.datatables.net/buttons/1.5.2/css/buttons.dataTables.min.css">
            <script type="text/javascript" language="javascript" src="https://code.jquery.com/jquery-3.3.1.js"></script>
	<script type="text/javascript" language="javascript" src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
	<script type="text/javascript" language="javascript" src="https://cdn.datatables.net/buttons/1.5.2/js/dataTables.buttons.min.js"></script>
	<script type="text/javascript" language="javascript" src="https://cdn.datatables.net/buttons/1.5.2/js/buttons.flash.min.js"></script>
	<script type="text/javascript" language="javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
	<script type="text/javascript" language="javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/pdfmake.min.js"></script>
	<script type="text/javascript" language="javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/vfs_fonts.js"></script>
	<script type="text/javascript" language="javascript" src="https://cdn.datatables.net/buttons/1.5.2/js/buttons.html5.min.js"></script>
	<script type="text/javascript" language="javascript" src="https://cdn.datatables.net/buttons/1.5.2/js/buttons.print.min.js"></script>
        <meta charset="utf-8" />
            <title><%= event.name %></title>
	</head>
	<body>
            <% include partials/nav.ejs %>
            <a href="/org/dashboard">Back to dashboard</a>
            <h1> <%= event.name %> Event</h1>
            <h1> 
                <% if (event.code == null) { %>
                Code: Code Expired/Event has not started
                <% } else { %>
                <div id="qrcode"><p><img src="<%= url %>"/></p></div>
                Code : <%= event.code %>
                <% } %>
            </h1>
            <p> <b><%= event.startDateTime %></b> to <b><%= event.endDateTime %></b></p>

            <button onclick="refresh()">Refresh List </button>

            <table id="signed" class="display nowrap" style="width:100%">
                <thead>
                    <strong>
                    <th> First Name </th>
                    <th> Last Name </th>
                    <th> zID </th>
                    <th> Email </th>
                    </strong>
                </thead>
                <tbody>
                <% for(let i = 0; i < users.length; i++) { %>
                <tr>
                    <td> <%= users[i].firstname %> </td>
                    <td> <%= users[i].lastname %> </td>
                    <td> <%= users[i].zID %> </td>
                    <td> <%= users[i].email %> </td>
                </tr>
                <% } %>
                </tbody>
            </table>
	</body>

        <script type="text/javascript">
            function refresh() {
                location='';
            }
            $(document).ready(function() {
                $('#signed').DataTable( {
                    dom: 'Bfrtip',
                    buttons: [
                        'excel','pdf'
                    ]
                } );
            } );
        </script>
</html>
